## radix树

在TCP/IP中，radix树可以被用来作为设计路由表的数据结构。而在Linux内核中，也被应用于内存管理相关的算法。



## 内存管理算法设计

内核中许多对象及结构体，大小都是固定的，使用动态且随机开辟内存的情况是比较少的。

而且，结构体如果严格按照主流CPU架构来设计，那么必须对大小及存放位置有所要求。结构体过小，cache命中率可能会降低，甚至出现大量断页，结构体放置的位置没有字节对齐，那么会降低访问速度。虽然目前内核并不支持虚拟内存，但是程序也应当具有良好的空间局部性。



基于此，算法思路如下：

1.使用radix进行位映射，连续位的大小映射可用内存的大小。

2.申请内存时，直接根据radix树遍历即可。

3.可用内存块与申请内存块大小差距过大，参考buddy算法进行二分即可。

4.需要使用连接链表维护各个内存块地址相对大小，也应当在结构体中添加字段进行染色，区分局部内存池可用、不可用等情况。

5.确保内存块必须为2的一定指数大小。

这其实类似于内存池机制，但是需要进行动态切割及合并。













